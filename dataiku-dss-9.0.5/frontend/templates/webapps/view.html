<div block-api-error></div>

<div ng-controller="WebAppViewController" ng-if="app" class="fh">
    <div future-waiting response="sharedState.backendFuture" ng-show="sharedState.backendFuture && !sharedState.backendFuture.hasResult"></div>

    <div ng-show="backendEnabled(app) && sharedState.backendRunning === false"
        class="alert"
        style="position: absolute; width: 100%; z-index: 2; box-sizing: border-box">

        <a class="pull-right link-std" ng-click="sharedState.backendRunning = null"> <i times-icon /> </a>
        This webapp requires a backend but it does not seem to be running
        <a class="btn btn--secondary" ng-click="restartBackend(app)" style="margin-left: 20px">
            <i class="icon-play" /> &nbsp; Start backend
        </a>
    </div>

    <div class="h100" ng-if="$root.appConfig.webappsIsolationMode == 'SANDBOX'">
        <iframe
             scrolling="yes"
            class="webapp-container h100"
            sandbox="allow-forms allow-pointer-lock allow-popups allow-scripts"
            ng-src='{{iFrameUrl}}'
            frameborder="0"
            style="width: 100%">
        </iframe>
    </div>
    <div class="h100" ng-if="$root.appConfig.webappsIsolationMode != 'SANDBOX'">
        <iframe
            scrolling="yes"
            class="webapp-container h100"
            ng-src='{{iFrameUrl}}'
            frameborder="0"
            style="width: 100%">
        </iframe>
    </div>
</div>