<form on-any-blur="checkAndRefresh()" name="processorForm" publish-in-grand-parent="processorForm">

    <fieldset>
        <span class="fieldLabel">Join column (here)</span>
            <input
                type='text'
                bs-typeahead='step.$stepState.change.columnsBeforeStep'
                autocomplete='off'
                ng-trim="false"
                ng-required="true"
                data-min-length='0'
                ng-model='step.params.leftCol'
                class="submit-on-blur"
                next-on-enter
                />
        </span>
    </fieldset>

    <fieldset>
        <span class="fieldLabel">Dataset to Join with</span>
            <input
                type='text'
                bs-typeahead='datasetNames'
                autocomplete='off'
                ng-trim="false"
                ng-required="true"
                data-min-length='0'
                ng-model='step.params.rightInput'
                class="submit-on-blur"
                next-on-enter
                />
        </span>
    </fieldset>

    <fieldset>
        <span class="fieldLabel">Join column (in other dataset)</span>
            <input
                type='text'
                bs-typeahead='getDatasetColumns(step.params.rightInput)'
                autocomplete='off'
                ng-trim="false"
                ng-required="true"
                data-min-length='0'
                ng-model='step.params.rightCol'
                class="submit-on-blur"
                next-on-enter
                />
        </span>
    </fieldset>

    <fieldset>
        <span class="fieldLabel">Columns to retrieve</span>
        <ng2-values-list 
            [(items)]="step.params.copyColumns"
            [suggestions]="getDatasetColumns(step.params.rightInput)"
            add-label="Add a column" 
            (on-blur)="checkAndRefresh()"
            (on-delete)="checkAndRefresh()"
            value-placeholder="E.g. a column of the schema">
        </ng2-values-list>
        </span>
    </fieldset>

    <fieldset>
        <span class="fieldLabel">Prefix all copied column names with this</span>
            <input
                type='text'
                ng-trim="false"
                ng-required="false"
                ng-model='step.params.copyPrefix'
                class="submit-on-blur"
                next-on-enter
                />
        </span>
    </fieldset>
</form>
