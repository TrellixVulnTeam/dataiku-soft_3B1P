<form on-any-blur="checkAndRefresh()" name="processorForm" publish-in-grand-parent="processorForm">

    <fieldset>
        <span class="fieldLabel">Input column</span>
        <input type="text" bs-typeahead="step.$stepState.change.columnsBeforeStep"
            autocomplete="off"
            ng-trim="false" ng-required="param.mandatory"
            data-min-length="0"
            ng-model="step.params.inCol"
            data-provide="typeahead"
            class="submit-on-blur"
            next-on-enter
            required="required" />
    </fieldset>

    <fieldset>
        <span class="fieldLabel">Date format</span>
        <input
            type="text"
            ng-model="step.params.format"
            class="submit-on-blur"
            next-on-enter
            required />
    </fieldset>

    <div class="" ng-show="step.params.format.indexOf('YYYY') > -1">
        <small style="color: #ff9a00"><i class="icon-warning-sign"></i> Did you mean yyyy?<br/>
            Uppercase Y refers to the week year. (<a href="http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html" target="_new">details</a>)
        </small>
    </div>

    <fieldset>
        <div class="fieldLabel">Locale</div>
        <select dku-bs-select
            ng-model="step.params.lang"
            class="submit-on-blur"
            next-on-enter
            required>
            <option value="en_US">en_US</option>
            <option value="fr_FR">fr_FR</option>
        </select>

    </fieldset>

    <fieldset>
        <div class="fieldLabel">Default timezone</div>
        <select dku-bs-select
            ng-model="step.params.timezone_id"
            ng-options="item.value as item.label for item in processor.params[4].advancedChoices"
            class="submit-on-blur"
            next-on-enter
            required>
        </select>
    </fieldset>

    <fieldset ng-show="step.params.timezone_id=='extract_from_ip'||step.params.timezone_id=='extract_from_column'">
        <span class="fieldLabel">Source column</span>
        <input
            type="text"
            bs-typeahead="step.$stepState.change.columnsBeforeStep"
            autocomplete="off"
            ng-trim="false"
            ng-required="param.mandatory"
            data-min-length="0"
            ng-model="step.params.timezone_src"
            class="submit-on-blur"
            next-on-enter
            data-provide="typeahead" />
    </fieldset>

    <fieldset>
        <span class="fieldLabel">Output column (empty for in-place)</span>
        <input
            type="text"
            ng-model="step.params.outCol"
            class="submit-on-blur"
            next-on-enter />
    </fieldset>

</form>