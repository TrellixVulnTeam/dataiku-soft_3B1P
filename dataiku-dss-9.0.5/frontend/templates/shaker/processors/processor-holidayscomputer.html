<form on-any-blur="checkAndRefresh()" name="processorForm" publish-in-grand-parent="processorForm">

    <fieldset>
        <span class="fieldLabel">Input column</span>
        <input type="text" bs-typeahead="step.$stepState.change.columnsBeforeStep"
               autocomplete="off" ng-trim="false" ng-required="param.mandatory"
               data-min-length="0" ng-model="step.params.inCol"
               data-provide="typeahead" required="required"
               class="submit-on-blur"
               next-on-enter/>
    </fieldset>

    <fieldset>
        <span class="fieldLabel">Output column prefix</span>
        <input type="text" ng-model="step.params.outColPrefix" required
               class="submit-on-blur"
               next-on-enter
                />
    </fieldset>

    <fieldset>
        <div class="fieldLabel">Country code</div>
        <select dku-bs-select
            ng-model="step.params.calendar_id"
            ng-options="item.value as item.label for item in processor.params[3].advancedChoices"
            class="submit-on-blur"
            next-on-enter
            required>
        </select>
    </fieldset>

    <fieldset ng-show="step.params.calendar_id=='extract_from_column'">
        <span class="fieldLabel">Country code source column</span>
        <input type="text" bs-typeahead="step.$stepState.change.columnsBeforeStep"
            autocomplete="off"
            ng-trim="false"
            ng-required="param.mandatory"
            data-min-length="0"
            ng-model="step.params.calendar_src"
            data-provide="typeahead"
            class="submit-on-blur"
            next-on-enter/>
    </fieldset>


    <fieldset>
        <div class="fieldLabel">Country's timezone</div>
        <select dku-bs-select
            ng-model="step.params.timezone_id"
            ng-options="item.value as item.label for item in processor.params[4].advancedChoices"
            class="submit-on-blur"
            next-on-enter
            required>
        </select>
    </fieldset>

    <fieldset ng-show="step.params.timezone_id=='extract_from_ip'||step.params.timezone_id=='extract_from_column'">
        <span class="fieldLabel">Timezone source column</span>
        <input type="text" bs-typeahead="step.$stepState.change.columnsBeforeStep"
          autocomplete="off"
          ng-trim="false"
          ng-required="param.mandatory"
          data-min-length="0"
          ng-model="step.params.timezone_src"
          data-provide="typeahead"
          class="submit-on-blur"
          next-on-enter/>
    </fieldset>

    <fieldset>
        <label class="control-label">
            <input type="checkbox"
                ng-model="step.params.flagBankHolidays"
                class="submit-on-blur"
                next-on-enter/>
            Flag bank holidays
        </label>
    </fieldset>

    <fieldset>
        <label class="control-label">
            <input type="checkbox"
                ng-model="step.params.flagSchoolHolidays"
                class="submit-on-blur"
                next-on-enter />
            Flag school holidays (FR only)
        </label>
    </fieldset>

    <fieldset>
        <label class="control-label">
            <input type="checkbox"
                ng-model="step.params.flagWeekends"
                class="submit-on-blur"
                next-on-enter/>
            Flag weekends
        </label>
    </fieldset>


    <fieldset>
        <label class="control-label">
            <input type="checkbox"
                ng-model="step.params.extractReasons"
                class="submit-on-blur"
                next-on-enter/>
            Extract reasons
        </label>
    </fieldset>

    <fieldset>
        <label class="control-label">
            <input type="checkbox"
                ng-model="step.params.extractZones"
                class="submit-on-blur"
                next-on-enter/>
            Extract zones (FR only)
        </label>
    </fieldset>

</form>