<form on-any-blur="checkAndRefresh()" name="processorForm" publish-in-grand-parent="processorForm">
    <fieldset>
        <span class="fieldLabel">Distance between column</span>
        <input
            type='text'
            bs-typeahead='step.$stepState.change.columnsBeforeStep'
            autocomplete='off'
            ng-trim="false"
            ng-required="true"
            required="required"
            data-min-length='0'
            ng-model='step.params.input1'
            class="submit-on-blur"
            next-on-enter/>
    </fieldset>

    <fieldset>
        <div class="fieldLabel">and</div>
        <select dku-bs-select
            ng-model="step.params.compareTo"
            class="submit-on-blur"
            next-on-enter
            required
            >
            <option value="GEOPOINT">A fixed geopoint</option>
            <option value="COLUMN">Another geopoint column</option>
        </select>
    </fieldset>

    <fieldset ng-show="step.params.compareTo == 'COLUMN'">
        <span class="fieldLabel">Other column</span>
        <input
            type='text'
            bs-typeahead='step.$stepState.change.columnsBeforeStep'
            autocomplete='off'
            ng-trim="false"
            ng-required="step.params.compareTo == 'COLUMN'"
            data-min-length='0'
            ng-model='step.params.input2'
            class="submit-on-blur"
            next-on-enter/>
    </fieldset>

    <fieldset ng-show="step.params.compareTo == 'GEOPOINT'">
        <span class="fieldLabel">Geopoint latitude</span>
        <input
            type='number'
            force-double
            ng-model='step.params.refLatitude'
            ng-required="step.params.compareTo == 'GEOPOINT'"
            class="submit-on-blur"
            next-on-enter/>
         <span class="fieldLabel">Geopoint longitude</span>
        <input
            type='number'
            force-double
            ng-model='step.params.refLongitude'
            ng-required="step.params.compareTo == 'GEOPOINT'"
            class="submit-on-blur"
            next-on-enter/>
    </fieldset>

    <fieldset>
        <div class="fieldLabel">Output distance unit</div>
        <select dku-bs-select
            ng-model="step.params.outputUnit"
            class="submit-on-blur"
            next-on-enter
            required
            >
            <option value="KILOMETERS">Kilometers</option>
            <option value="MILES">Miles</option>
        </select>
    </fieldset>

    <fieldset>
        <span class="fieldLabel">Output column</span>
        <input
            type="text"
            ng-model="step.params.output"
            ng-required="true"
            required="required"
            class="submit-on-blur"
            next-on-enter/>
    </fieldset>

</form>

