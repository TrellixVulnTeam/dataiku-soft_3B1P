<form class="dkuform-horizontal">
    <div on-smart-change="onFormatParamsChanged()">
        <form-template-element model="dataset.formatParams" field="formatsAsMap[dataset.formatType].extractFromSingleElement"></form-template-element>

        <!-- don't show the root element path field unless you need to fill it -->
        <form-template-element ng-if="dataset.formatParams.extractFromSingleElement" model="dataset.formatParams" field="formatsAsMap[dataset.formatType].rootPath"></form-template-element>

        <div class="control-group">
            <label class="control-label">Max expansion depth</label>
            <div class="controls">
                <input force-integer type="number" min="-1" ng-model="dataset.formatParams.maxExpansionDepth" step="1" class="input-mini" ng-required="true" />
                <span class="help-inline">-1 = unlimited</span>
            </div>
        </div>
        
        <form-template-element model="dataset.formatParams" field="formatsAsMap[dataset.formatType].nestedArraysHandling"></form-template-element>

        <form-template-element model="dataset.formatParams" field="formatsAsMap[dataset.formatType].nestedArraysMaxElements"></form-template-element>

        <form-template-element model="dataset.formatParams" field="formatsAsMap[dataset.formatType].nestedArraysMaxContentSize"></form-template-element>

        <form-template-element model="dataset.formatParams" field="formatsAsMap[dataset.formatType].compress"></form-template-element>
    </div>
</form>