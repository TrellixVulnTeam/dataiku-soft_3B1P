<div class="paned-settings-page-pane h100 oa">
    <div class="paned-settings-page-pane__sticky">
        <div class="pull-right" style="margin: 10px">
            <button class="btn btn--secondary" ng-click="refresh()">
                <i class="icon-refresh" /> Refresh
            </button>
        </div>

        <h1>Scheduled tasks</h1>
    </div>
    <div class="section">

    <div block-api-error></div>

    <table sort-table class="table table-striped table-hover" style="width:100%">
        <thead>
            <tr>
                <th>Task id</th>
                <th>Description</th>
                <th>Next launch</th>
                <th>&nbsp;</th>
            </tr>
        </thead>
        <tbody>
            <tr full-click ng-repeat="task in status.tasks">
                <td>{{task.jobName}}</td>
                <td>{{task.description}}</td>
                <td>{{task.nextFire || 'NA'}}</td>
                <td>
                    <button class="btn btn--secondary" ng-click="fireTask(task)">Run now</button>
                </td>
            </tr>
        </tbody>
    </table>

    <h2 class="settings-section-title" id="logs">Logs</h2>

    <table sort-table class="table table-striped table-hover" style="width:100%">
        <thead>
            <tr>
                <th>Time</th>
                <th>Task id</th>
                <th>Message</th>
            </tr>
        </thead>
        <tbody>
            <tr full-click ng-repeat="entry in status.log track by $index"> <!-- track by $index in case of problem and some entries are null -->
                <td>{{entry.timestamp}}</td>
                <td>{{entry.jobGroup}} / {{entry.jobName}}</td>
                <td>{{entry.description}}</td>
            </tr>
        </tbody>
    </table>
</div>