<div class="vertical-flex">
    <div>
        <div class="flex">
            <h2 class="home-nav-title">
                <span class="home-nav-title-element project-home-nav-title-bar"><a ui-sref="home" id="qa_homepage_expanded-list-home-button">HOME</a></span>
                <span class="home-nav-title-element"><i class="icon-angle-right"/></span>
                <span class="home-nav-title-element"><a ui-sref="home.expanded{{displayMode}}({ row:'{{rowType}}'})">{{heading}}</a></span>
            </h2>
        </div>
    </div>
    <div class="search-bar horizontal-flex">
        <!-- home-expanded-header -->
        <div class="flex std-list-search-box">
                        <span class="add-on">
                            <i class="icon-filter"></i>
                        </span>
            <input type="search"
                   auto-focus="true"
                   ng-model="selection.filterQuery.userQuery"
                   ng-init="selection.filterQuery.userQuery = $stateParams.filterBy"
                   placeholder="Filter items..."
                   ui-keydown="{'enter': 'goToFirstFilteredProject()'}"/>
        </div>
        <div class="noflex sort-box list-control-widget" ng-if="!noSort" >
            <sort-order-button class="order" value="selection.orderReversed"
                               ng-init="selection.orderReversed = settings.activeRoute.sortRev"
                               sob-opt="{'buttonClass':'btn'}"></sort-order-button>

            <select dku-bs-select="{style: 'dku-select-button'}"
                    ng-model="selection.orderQuery"
                    ng-init="selection.orderQuery = settings.activeRoute.sortBy"
                    ng-options="obj.value as obj.label for obj in sortOptions.sortBy"
                    required
            />
        </div>

        <div custom-element-popup close-on-click="true" class="manage-items-widget list-customfilter-box list-control-widget list-control-dropdown">
            <span class="add-on"><i ng-class="{'mosaic':'icon-shaker', 'list':'icon-list', 'flow':'icon-dku-nav_flow'}[displayMode]" /></span>
            <button class="dku-select-button mainzone tags-box-button has-caret" ng-click="togglePopover()">
                <span style="text-transform: capitalize;">{{ displayMode }}</span>
                <b class="caret" />
            </button>
            <div class="popover custom-element-popup-popover display-mode-list-popover" id="home-projects-display-mode-popover">
                <div style="max-height:300px">
                    <ul>
                        <li ng-click="changeDisplayMode($event, isStandalone() ? rowType : 'home.expandedmosaic')"><i class="display-mode-icon icon-shaker" /><span class="display-mode-title">Mosaic</span></li>
                        <li ng-click="changeDisplayMode($event, isStandalone() ? rowType + '.list' : 'home.expandedlist')"><i class="display-mode-icon icon-list" /><span class="display-mode-title">List</span></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="error-drawer" ng-if="selection.filterParams.userQueryErrors">
        <div class="error" ng-repeat="(exp, err) in selection.filterParams.userQueryErrors">
            <i class="icon icon-warning-sign"/>{{err.message}}
        </div>
    </div>

</div>